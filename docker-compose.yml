version: "3.1"
services:
  dynamodb:
    container_name: "s2s_dynamodb-local"
    image: amazon/dynamodb-local
    ports:
      - "8000:8000"
  dynamo-admin:
    container_name: "s2s_dynamodb-admin-local"
    image: instructure/dynamo-local-admin
    ports:
      - 8008:8000
    environment:
      DYNAMO_ENDPOINT: http://dynamodb:8000
      AWS_REGION: "ap-northeast-1"
      AWS_ACCESS_KEY_ID: "AWS_ACCESS_KEY_ID"
      AWS_SECRET_ACCESS_KEY: "AWS_SECRET_ACCESS_KEY"
    depends_on:
      - dynamodb
  localstack:
    image: localstack/localstack:latest
    container_name: "s2s_localstack"
    environment:
      - SERVICES=sqs, cloudformation, s3, lambda, sts, apigateway, iam
      - DEFAULT_REGION=ap-northeast-1
      - DATA_DIR=/tmp/localstack/data
      - LAMBDA_EXECUTOR=docker
    ports:
      # - 4566:4566
      - 4566-4599:4566-4599
